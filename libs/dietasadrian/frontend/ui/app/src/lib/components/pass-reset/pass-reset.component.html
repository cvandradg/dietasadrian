<div class="container">
  <div class="title">Cambiar contraseña</div>
  <div class="description">
    Si no deseas cambiar la contraseña cierra esta ventana.
  </div>

  <div class="reset-pass-input">
    <form [formGroup]="loginInputForm" class="form-pass-reset-inputs">
      <mat-form-field>
        <mat-label>Contraseña</mat-label>
        <input
          matInput
          placeholder="EjemploDeClave1!"
          type="password"
          formControlName="pass"
          (keyup.enter)="resetPassword()"
        />
      </mat-form-field>
    </form>

    <div
      class="horizontal-animation clase"
      [ngClass]="{ 'enabled-button': isSubmitButtonEnable || successPassReset }"
    >
      <button
        mat-button
        [disabled]="successPassReset"
        (click)="isSubmitButtonEnable && resetPassword()"
        (keyup.enter)="isSubmitButtonEnable && resetPassword()"
      >
        <div class="pass-reset-button">
          <p>Cambiar contraseña</p>
          <fa-icon
            *ngIf="!(loading$ | async)!"
            [icon]="['fas', 'arrow-right']"
            style="--fa-animation-iteration-count: 2"
            class="icon fa-xl fa-shake"
            style="--fa-animation-iteration-count: 2"
          ></fa-icon>

          <fa-icon
            *ngIf="(loading$ | async)!"
            [icon]="['fas', 'spinner-third']"
            class="icon fa-xl fa-spin"
            style="--fa-animation-duration: 1s"
          ></fa-icon>
        </div>
      </button>
    </div>
    <div [routerLink]="'/'">
      <div
        class="success-message centered"
        *ngIf="!(loading$ | async)! && successPassReset"
      >
        <p>Creaste una nueva contraseña.</p>
        <fa-icon
          [icon]="['fas', 'check']"
          style="--fa-animation-iteration-count: 2"
          class="icon fa-xl fa-shake"
          style="--fa-animation-iteration-count: 2"
        ></fa-icon>
      </div>
      <div
        class="success-message centered"
        *ngIf="!(loading$ | async)! && successPassReset"
      >
        Click aca para acceder
      </div>
    </div>

    <div
      class="error-message centered"
      *ngIf="!(loading$ | async)! && error.status"
    >
      <p>
        {{ error.message }}
      </p>
      <fa-icon
        [icon]="['fas', 'xmark']"
        style="--fa-animation-iteration-count: 2"
        class="icon fa-xl fa-shake"
        style="--fa-animation-iteration-count: 2"
      ></fa-icon>
    </div>
    <dietas-adrian-nx-workspace-strength-meter
      [password]="loginInputForm.get('pass')?.value || ''"
      (enableButton)="enableButton($event)"
    ></dietas-adrian-nx-workspace-strength-meter>
  </div>
</div>
